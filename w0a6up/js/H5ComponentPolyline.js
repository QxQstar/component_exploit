/* 柱图组件对象 */
var H5ComponentPolyline = function(name,cfg){
    var component = new H5ComponentBase(name,cfg);
    //创建一个画布
    var canvas = document.createElement('canvas');
    var context = canvas.getContext('2d');
    var w = context.width = canvas.width = cfg.width;
    var h = context.height = canvas.height = cfg.height;
    component.append(canvas);
    window.context = context;
    //画水平网格线,水平线的行表示进度，在这里假设进度为10，所有要有10行,作为背景层
    var step = 10;//画11条线
    context.beginPath();
    context.lineWidth = 1;
    context.strokeStyle = "#aaaaaa";
    var x,y;
    y = h/step;//水平线的间距
    for(var i = 0 ;i<=step;i++){
        y = h/step;
        context.moveTo(0,i*y);
        context.lineTo(w,i*y);
    }
    step = cfg.data.length+1;
    x = w/step;//垂直线的间距
    for(var j = 0;j<=step;j++){
        context.moveTo(j*x,0);
        context.lineTo(j*x,h);
        if(cfg.data[j]){
            var text = $('<div class="text"></div>');
           text.text(cfg.data[j][0]).css({width:w/2/step,left:(j+1)*x/2 - w/4/step});
            component.append(text);
        }
    }
    context.stroke();
    //画折线
    canvas = document.createElement('canvas');
    context = canvas.getContext('2d');
     w = context.width = canvas.width = cfg.width;
     h = context.height = canvas.height = cfg.height;
    context.lineWidth = 3;
    context.strokeStyle = "#FF9868";
    context.fillStyle = '#FF9868';
    context.moveTo(10,h-10);
    x = w/(cfg.data.length + 1);//x为列的间距
    //画点
    for(i = 0;i<cfg.data.length;i++){
        context.beginPath();
        var item = cfg.data[i];
        var per = item[1];
        context.moveTo((i+1)*x,h - per*h);
        context.arc((i+1)*x,h - per*h,6,0,2*Math.PI);
        context.fill();
    }
    context.beginPath();
    context.moveTo(x,h-cfg.data[0][1]*h);
    context.fillStyle = '#000000';
    //画线和填写数据
    for(i = 0;i<cfg.data.length;i++){
         item = cfg.data[i];
        per = item[1];
        context.fillStyle = item[2] ? item[2] : "#595959";
        context.lineTo((i+1)*x,h - per*h);
        context.fillText((per *100 >> 0) +"%",(i+1)*x - 10,h - per*h - 20);
    }
    context.stroke();
    context.lineTo(cfg.data.length*x,h);
    context.lineTo(x,h);
    context.fillStyle ='rgba(255,152,84,0.3)';
    context.fill();//根据lineTo画的路径去填充
    component.append(canvas);
    return component;
};