/**
 * Created by Administrator on 2016/8/26.
 */
function PieChart(cfg){
    var canvas = new CreateCanvas(cfg.width,cfg.height);
    var context = canvas.context;
    (function(cfg){
        //开始的弧度
        var start = 0;
        var end = 0;
        var x= cfg.width/2;
        var y = cfg.height/2;
        var data = cfg.data;
        var r = Math.min(x/2,y/2);
        for(var  i =0;i<data.length;i++){
            context.beginPath();
            context.fillStyle = cfg.data[i][1];
            end =  start+data[i][0]*Math.PI*2;
            context.moveTo(x,y);
            context.arc(x,y,r,start,end);
            var div = document.createElement('div');
            div.className = 'text';
            div.innerHTML = data[i][0];
            div.style.top = y + r*Math.sin( ( start + (start + data[i][0]*Math.PI*2))/2) + 'px';
            div.style.left = x + r*Math.cos( ( start + (start + data[i][0]*Math.PI*2))/2) + 'px';
            document.body.appendChild(div);
            start = end;
            context.fill();
            context.closePath()
        }
    })(cfg);
    return canvas.canvas;
}